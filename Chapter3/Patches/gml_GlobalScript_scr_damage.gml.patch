--- a/Code/gml_GlobalScript_scr_damage.gml
+++ b/Code/gml_GlobalScript_scr_damage.gml
@@ -77,39 +77,61 @@
         {
             if (obj_knight_enemy.aoedamage == false)
             {
-                if (target == 0)
-                {
-                    if (global.hp[2] > 0 && global.hp[3] > 0)
-                    {
-                        target = choose(1, 2);
-                    }
-                    else if (global.hp[2] > 0)
-                    {
-                        target = 1;
-                    }
-                    else if (global.hp[3] > 0)
-                    {
-                        target = 2;
+                if (!obj_knight_enemy.krisValid)
+                {
+                    if (global.char[target] < 2)
+                    {
+                        target = choose(0, 1, 2);
+                        repeat (2)
+                        {
+                            if (global.char[target] < 2 || global.hp[global.char[target]] < 1)
+                            {
+                                target++;
+                            }
+                            if (target > 2)
+                            {
+                                target = 0;
+                            }
+                        }
+                    }
+                }
+                else if (global.char[target] < 1)
+                {
+                    target = choose(0, 1, 2);
+                    repeat (2)
+                    {
+                        if (global.char[target] < 1 || global.hp[global.char[target]] < 1)
+                        {
+                            target++;
+                        }
+                        if (target > 2)
+                        {
+                            target = 0;
+                        }
                     }
                 }
                 if (obj_knight_enemy.myattackchoice != 13)
                 {
-                    if (global.chararmor1[1] == 23 || global.chararmor2[1] == 23 || global.chararmor1[2] == 23 || global.chararmor2[2] == 23 || global.chararmor1[3] == 23 || global.chararmor2[3] == 23)
+                    if (scr_armorcheck_equipped_party(23))
                     {
                         obj_knight_enemy.damagecounter++;
                         if (obj_knight_enemy.damagecounter < 3)
                         {
-                            if (global.hp[1] > 0 && (global.chararmor1[1] == 23 || global.chararmor2[1] == 23))
-                            {
-                                target = 0;
-                            }
-                            if (global.hp[2] > 0 && (global.chararmor1[2] == 23 || global.chararmor2[2] == 23))
-                            {
-                                target = 1;
-                            }
-                            if (global.hp[3] > 0 && (global.chararmor1[3] == 23 || global.chararmor2[3] == 23))
-                            {
-                                target = 2;
+                            if (obj_knight_enemy.krisTarget && scr_armorcheck_equipped(1, 23))
+                            {
+                                target = scr_findchar(1);
+                            }
+                            if (obj_knight_enemy.susieTarget && scr_armorcheck_equipped(2, 23))
+                            {
+                                target = scr_findchar(2);
+                            }
+                            if (obj_knight_enemy.ralseiTarget && scr_armorcheck_equipped(3, 23))
+                            {
+                                target = scr_findchar(3);
+                            }
+                            if (obj_knight_enemy.noelleTarget && scr_armorcheck_equipped(4, 23))
+                            {
+                                target = scr_findchar(4);
                             }
                         }
                         else
@@ -117,15 +139,7 @@
                             target = choose(0, 1, 2);
                             repeat (2)
                             {
-                                if (global.hp[1] < 1 && target == 0)
-                                {
-                                    target++;
-                                }
-                                if (global.hp[2] < 1 && target == 1)
-                                {
-                                    target++;
-                                }
-                                if (global.hp[3] < 1 && target == 2)
+                                if (global.char[target] == 0 || global.hp[global.char[target]] < 1)
                                 {
                                     target++;
                                 }
@@ -134,13 +148,7 @@
                                     target = 0;
                                 }
                             }
-                            if ((target == 0 && global.chararmor1[1] == 23) || global.chararmor2[1] == 23)
-                            {
-                            }
-                            else if ((target == 1 && global.chararmor1[2] == 23) || global.chararmor2[2] == 23)
-                            {
-                            }
-                            else if ((target == 2 && global.chararmor1[3] == 23) || global.chararmor2[3] == 23)
+                            if (scr_armorcheck_equipped(global.char[target], 23) == 1)
                             {
                             }
                             else
@@ -154,7 +162,7 @@
         }
         if (global.chapter == 3 && i_ex(obj_rouxls_ch3_enemy))
         {
-            if (global.hp[1] > global.hp[2] && global.hp[1] > global.hp[3])
+            if (global.hp[0] > global.hp[2] && global.hp[1] > global.hp[3])
             {
                 target = 0;
             }
@@ -194,17 +202,7 @@
             chartarget = global.char[target];
             if (global.chapter == 3 && i_ex(obj_knight_enemy) && truedamage == 0)
             {
-                if ((global.chararmor1[1] == 23 || global.chararmor2[1] == 23) && target == 0)
-                {
-                    tdamage = round(tdamage * 0.33);
-                    shadowmantlereduction = true;
-                }
-                if ((global.chararmor1[2] == 23 || global.chararmor2[2] == 23) && target == 1)
-                {
-                    tdamage = round(tdamage * 0.33);
-                    shadowmantlereduction = true;
-                }
-                if ((global.chararmor1[3] == 23 || global.chararmor2[3] == 23) && target == 2)
+                if (scr_armorcheck_equipped(chartarget, 23))
                 {
                     tdamage = round(tdamage * 0.33);
                     shadowmantlereduction = true;
@@ -280,7 +278,7 @@
                 {
                     if (global.chapter == 3 && i_ex(obj_knight_enemy))
                     {
-                        if (target == 0)
+                        if (global.char[target] == 1)
                         {
                             hpdiff = abs(global.hp[chartarget] - (global.maxhp[chartarget] / 2));
                             doomtype = 4;
